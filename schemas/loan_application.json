{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Loan-Application Case",
  "type": "object",
  "required": ["cluster", "events"],
  "additionalProperties": false,

  "properties": {
    "cluster": {
      "type": "string",
      "enum": [
        "Mortgage Loan",
        "Personal Loan",
        "Auto Loan",
        "Business Loan",
        "Other"
      ]
    },
    "events": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": [
          "activity",
          "timestamp",
          "contextual_activity",
          "message"
        ],
        "additionalProperties": false,
        "properties": {
          "activity": {
            "type": "string",
            "enum": [
              "Application Submitted",
              "Application Categorised",
              "Loan Officer Assigned",
              "Initial Review",
              "Documents Requested",
              "Documents Submitted",
              "Credit Check Completed",
              "Risk Assessment Completed",
              "Offer Presented",
              "Applicant Feedback Received",
              "Application Escalated",
              "Loan Approved",
              "Loan Funded",
              "Post-Approval Follow-up",
              "Application Closed"
            ]
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "contextual_activity": {
            "type": "string",
            "pattern": "^(Application Submitted|Application Categorised|Loan Officer Assigned|Initial Review|Documents Requested|Documents Submitted|Credit Check Completed|Risk Assessment Completed|Offer Presented|Applicant Feedback Received|Application Escalated|Loan Approved|Loan Funded|Post-Approval Follow-up|Application Closed) \\((Positive|Neutral|Negative)\\)$"
          },
          "message": {
            "type": "string",
            "minLength": 50
          }
        }
      }
    }
  }
}